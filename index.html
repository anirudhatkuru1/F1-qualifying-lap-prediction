<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>F1 Qualifying Lap Predictor</title>
</head>
<body>

<h1>F1 Qualifying Lap Predictor</h1>

<label>Driver</label>
<select id="driver"></select>

<label>Team</label>
<select id="team"></select>

<label>Event</label>
<select id="event"></select>

<label>Qualifying Segment</label>
<select id="segment">
  <option>Q1</option>
  <option>Q2</option>
  <option selected>Q3</option>
</select>

<br><br>
<button onclick="predict()">Predict</button>

<div id="result"></div>

<script>
async function loadMetadata() {
  const res = await fetch("https://f1-qualifying-lap-prediction.onrender.com/metadata");
  const data = await res.json();

  driver.innerHTML = data.drivers.map(d => `<option>${d}</option>`).join("");
  team.innerHTML   = data.teams.map(t => `<option>${t}</option>`).join("");
  event.innerHTML  = data.events.map(e => `<option>${e}</option>`).join("");
}

async function predict() {
  const res = await fetch(
    "https://f1-qualifying-lap-prediction.onrender.com/predict",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        driver: driver.value,
        team: team.value,
        event: event.value,
        quali_segment: segment.value
      })
    }
  );

  const data = await res.json();
  result.innerText = data.predicted_lap_time_sec
    ? `Predicted lap time: ${data.predicted_lap_time_sec} sec`
    : `Error: ${data.error}`;
}

loadMetadata();
</script>

</body>
</html>
